<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Your Cart â€” Tazamall</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<header>
  <div class="taz"><a href="index.html" style="text-decoration:none;color:inherit">Tazamall</a></div>
  <div style="opacity:0.9;color:white">Cart</div>
</header>

<div class="cart-container">
  <h2>Your Cart</h2>
  <div id="cartList"></div>

  <div style="text-align:right;margin-top:12px">
    <div style="font-size:18px">Total: <span id="cartTotal">KES 0</span></div>
    <div style="margin-top:12px">
      <button onclick="location.href='checkout.html'" class="btn">Proceed to Checkout</button>
    </div>
  </div>
</div>

<script src="products.js"></script>
<script src="main.js"></script>
<script>
function renderCartPage(){
  const list = cartItemsDetailed();
  const container = document.getElementById("cartList");
  container.innerHTML = "";
  if(list.length === 0){
    container.innerHTML = "<p>Your cart is empty.</p>";
    document.getElementById("cartTotal").textContent = "KES 0";
    return;
  }
  list.forEach(item => {
    const div = document.createElement("div");
    div.className = "cart-item";
    div.innerHTML = `
      <img src="${item.img}">
      <div style="flex:1">
        <h3 style="margin:0">${item.name}</h3>
        <div class="muted">KES ${item.price.toLocaleString()}</div>
        <div style="margin-top:8px;display:flex;gap:8px;align-items:center">
          <div class="qty-controls">
            <button onclick="changeQty(${item.id}, -1)">-</button>
            <div style="padding:6px 10px;background:#f0f9f2;border-radius:8px">${item.qty}</div>
            <button onclick="changeQty(${item.id}, 1)">+</button>
          </div>
          <button style="margin-left:12px" onclick="removeAndRender(${item.id})" class="btn ghost">Remove</button>
        </div>
      </div>
      <div style="text-align:right;font-weight:800">KES ${item.subtotal.toLocaleString()}</div>
    `;
    container.appendChild(div);
  });
  document.getElementById("cartTotal").textContent = "KES " + cartTotal().toLocaleString();
}
function removeAndRender(id){ removeFromCart(id); renderCartPage(); }
renderCartPage();
</script>
</body>
</html>